{"ast":null,"code":"import { jsx } from \"react/jsx-runtime\";\nimport { useCallback } from \"react\";\nimport { useCart } from \"./CartProvider.mjs\";\nimport { useCartLine } from \"./CartLineProvider.mjs\";\nimport { BaseButton } from \"./BaseButton.mjs\";\nfunction CartLineQuantityAdjustButton(props) {\n  const {\n    status,\n    linesRemove,\n    linesUpdate\n  } = useCart();\n  const cartLine = useCartLine();\n  const {\n    children,\n    adjust,\n    onClick,\n    ...passthroughProps\n  } = props;\n  const handleAdjust = useCallback(() => {\n    if (adjust === \"remove\") {\n      linesRemove([(cartLine == null ? void 0 : cartLine.id) ?? \"\"]);\n      return;\n    }\n    const quantity = adjust === \"decrease\" ? ((cartLine == null ? void 0 : cartLine.quantity) ?? 0) - 1 : ((cartLine == null ? void 0 : cartLine.quantity) ?? 0) + 1;\n    if (quantity <= 0) {\n      linesRemove([(cartLine == null ? void 0 : cartLine.id) ?? \"\"]);\n      return;\n    }\n    const lineUpdate = {\n      id: (cartLine == null ? void 0 : cartLine.id) ?? \"\",\n      quantity,\n      attributes: (cartLine == null ? void 0 : cartLine.attributes) ?? []\n    };\n    linesUpdate([lineUpdate]);\n  }, [adjust, cartLine == null ? void 0 : cartLine.attributes, cartLine == null ? void 0 : cartLine.id, cartLine == null ? void 0 : cartLine.quantity, linesRemove, linesUpdate]);\n  return /* @__PURE__ */jsx(BaseButton, {\n    ...passthroughProps,\n    onClick,\n    defaultOnClick: handleAdjust,\n    disabled: typeof passthroughProps.disabled !== \"undefined\" ? passthroughProps.disabled : status !== \"idle\",\n    children\n  });\n}\nexport { CartLineQuantityAdjustButton };","map":{"version":3,"names":["CartLineQuantityAdjustButton","props","status","linesRemove","linesUpdate","useCart","cartLine","useCartLine","children","adjust","onClick","passthroughProps","handleAdjust","useCallback","id","quantity","lineUpdate","attributes","jsx","BaseButton","defaultOnClick","disabled"],"sources":["/home/martin/node_modules/.pnpm/@shopify+hydrogen-react@2023.4.0_react-dom@18.2.0_react@18.2.0_typescript@5.0.4/node_modules/@shopify/hydrogen-react/src/CartLineQuantityAdjustButton.tsx"],"sourcesContent":["import {useCallback} from 'react';\nimport {useCart} from './CartProvider.js';\nimport {useCartLine} from './CartLineProvider.js';\nimport {BaseButton, type BaseButtonProps} from './BaseButton.js';\nimport type {CartLineUpdateInput} from './storefront-api-types.js';\n\ninterface CartLineQuantityAdjustButtonBaseProps {\n  /** The adjustment for a cart line's quantity. Valid values: `increase` (default), `decrease`, or `remove`. */\n  adjust?: 'increase' | 'decrease' | 'remove';\n}\n\ntype CartLineQuantityAdjustButtonProps<\n  AsType extends React.ElementType = 'button',\n> = BaseButtonProps<AsType> & CartLineQuantityAdjustButtonBaseProps;\n\n/**\n * The `<CartLineQuantityAdjustButton />` component renders a button that adjusts the cart line's quantity when pressed.\n *\n * It must be a descendent of `<CartLineProvider/>` and `<CartProvider/>`.\n */\nexport function CartLineQuantityAdjustButton<\n  AsType extends React.ElementType = 'button',\n>(props: CartLineQuantityAdjustButtonProps<AsType>): JSX.Element {\n  const {status, linesRemove, linesUpdate} = useCart();\n  const cartLine = useCartLine();\n  const {children, adjust, onClick, ...passthroughProps} = props;\n\n  const handleAdjust = useCallback(() => {\n    if (adjust === 'remove') {\n      linesRemove([cartLine?.id ?? '']);\n      return;\n    }\n\n    const quantity =\n      adjust === 'decrease'\n        ? (cartLine?.quantity ?? 0) - 1\n        : (cartLine?.quantity ?? 0) + 1;\n\n    if (quantity <= 0) {\n      linesRemove([cartLine?.id ?? '']);\n      return;\n    }\n\n    const lineUpdate = {\n      id: cartLine?.id ?? '',\n      quantity,\n      attributes: (cartLine?.attributes ??\n        []) as CartLineUpdateInput['attributes'],\n    } satisfies CartLineUpdateInput;\n\n    linesUpdate([lineUpdate]);\n  }, [\n    adjust,\n    cartLine?.attributes,\n    cartLine?.id,\n    cartLine?.quantity,\n    linesRemove,\n    linesUpdate,\n  ]);\n\n  return (\n    <BaseButton\n      {...passthroughProps}\n      onClick={onClick}\n      defaultOnClick={handleAdjust}\n      disabled={\n        typeof passthroughProps.disabled !== 'undefined'\n          ? passthroughProps.disabled\n          : status !== 'idle'\n      }\n    >\n      {children}\n    </BaseButton>\n  );\n}\n"],"mappings":";;;;;AAoBO,SAASA,6BAEdC,KAAA,EAA+D;EAC/D,MAAM;IAACC,MAAA;IAAQC,WAAA;IAAaC;EAAA,IAAeC,OAAA,CAAQ;EACnD,MAAMC,QAAA,GAAWC,WAAA;EACjB,MAAM;IAACC,QAAA;IAAUC,MAAA;IAAQC,OAAA;IAAS,GAAGC;EAAoB,IAAAV,KAAA;EAEnD,MAAAW,YAAA,GAAeC,WAAA,CAAY,MAAM;IACrC,IAAIJ,MAAA,KAAW,UAAU;MACvBN,WAAA,CAAY,EAACG,QAAA,oBAAAA,QAAA,CAAUQ,EAAA,KAAM,EAAE,CAAC;MAChC;IACF;IAEM,MAAAC,QAAA,GACJN,MAAA,KAAW,eACNH,QAAA,oBAAAA,QAAA,CAAUS,QAAA,KAAY,KAAK,MAC3BT,QAAA,oBAAAA,QAAA,CAAUS,QAAA,KAAY,KAAK;IAElC,IAAIA,QAAA,IAAY,GAAG;MACjBZ,WAAA,CAAY,EAACG,QAAA,oBAAAA,QAAA,CAAUQ,EAAA,KAAM,EAAE,CAAC;MAChC;IACF;IAEA,MAAME,UAAA,GAAa;MACjBF,EAAA,GAAIR,QAAA,oBAAAA,QAAA,CAAUQ,EAAA,KAAM;MACpBC,QAAA;MACAE,UAAA,GAAaX,QAAA,oBAAAA,QAAA,CAAUW,UAAA,KACrB;IAAC;IAGOb,WAAA,EAACY,UAAU,CAAC;EAAA,GACvB,CACDP,MAAA,EACAH,QAAA,oBAAAA,QAAA,CAAUW,UAAA,EACVX,QAAA,oBAAAA,QAAA,CAAUQ,EAAA,EACVR,QAAA,oBAAAA,QAAA,CAAUS,QAAA,EACVZ,WAAA,EACAC,WAAA,CACD;EAGC,sBAAAc,GAAA,CAACC,UAAA;IACE,GAAGR,gBAAA;IACJD,OAAA;IACAU,cAAA,EAAgBR,YAAA;IAChBS,QAAA,EACE,OAAOV,gBAAA,CAAiBU,QAAA,KAAa,cACjCV,gBAAA,CAAiBU,QAAA,GACjBnB,MAAA,KAAW;IAGhBM;EAAA;AAGP"},"metadata":{},"sourceType":"module","externalDependencies":[]}