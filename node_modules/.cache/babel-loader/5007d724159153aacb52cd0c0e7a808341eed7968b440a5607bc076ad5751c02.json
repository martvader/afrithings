{"ast":null,"code":"import { jsxs, Fragment } from \"react/jsx-runtime\";\nimport { useMoney } from \"./useMoney.mjs\";\nfunction Money(_ref) {\n  let {\n    data,\n    as,\n    withoutCurrency,\n    withoutTrailingZeros,\n    measurement,\n    measurementSeparator = \"/\",\n    ...passthroughProps\n  } = _ref;\n  if (!isMoney(data)) {\n    throw new Error(`<Money/> needs a valid 'data' prop that has 'amount' and 'currencyCode'`);\n  }\n  const moneyObject = useMoney(data);\n  const Wrapper = as ?? \"div\";\n  let output = moneyObject.localizedString;\n  if (withoutCurrency || withoutTrailingZeros) {\n    if (withoutCurrency && !withoutTrailingZeros) {\n      output = moneyObject.amount;\n    } else if (!withoutCurrency && withoutTrailingZeros) {\n      output = moneyObject.withoutTrailingZeros;\n    } else {\n      output = moneyObject.withoutTrailingZerosAndCurrency;\n    }\n  }\n  return /* @__PURE__ */jsxs(Wrapper, {\n    ...passthroughProps,\n    children: [output, measurement && measurement.referenceUnit && /* @__PURE__ */jsxs(Fragment, {\n      children: [measurementSeparator, measurement.referenceUnit]\n    })]\n  });\n}\nfunction isMoney(maybeMoney) {\n  return typeof maybeMoney.amount === \"string\" && !!maybeMoney.amount && typeof maybeMoney.currencyCode === \"string\" && !!maybeMoney.currencyCode;\n}\nexport { Money };","map":{"version":3,"names":["Money","_ref","data","as","withoutCurrency","withoutTrailingZeros","measurement","measurementSeparator","passthroughProps","isMoney","Error","moneyObject","useMoney","Wrapper","output","localizedString","amount","withoutTrailingZerosAndCurrency","jsxs","children","referenceUnit","Fragment","maybeMoney","currencyCode"],"sources":["/home/martin/node_modules/.pnpm/@shopify+hydrogen-react@2023.4.0_react-dom@18.2.0_react@18.2.0_typescript@5.0.4/node_modules/@shopify/hydrogen-react/src/Money.tsx"],"sourcesContent":["import {type ReactNode} from 'react';\nimport {useMoney} from './useMoney.js';\nimport type {MoneyV2, UnitPriceMeasurement} from './storefront-api-types.js';\nimport type {PartialDeep} from 'type-fest';\n\nexport interface MoneyPropsBase<ComponentGeneric extends React.ElementType> {\n  /** An HTML tag or React Component to be rendered as the base element wrapper. The default is `div`. */\n  as?: ComponentGeneric;\n  /** An object with fields that correspond to the Storefront API's [MoneyV2 object](https://shopify.dev/api/storefront/reference/common-objects/moneyv2). */\n  data: PartialDeep<MoneyV2, {recurseIntoArrays: true}>;\n  /** Whether to remove the currency symbol from the output. */\n  withoutCurrency?: boolean;\n  /** Whether to remove trailing zeros (fractional money) from the output. */\n  withoutTrailingZeros?: boolean;\n  /** A [UnitPriceMeasurement object](https://shopify.dev/api/storefront/2023-04/objects/unitpricemeasurement). */\n  measurement?: PartialDeep<UnitPriceMeasurement, {recurseIntoArrays: true}>;\n  /** Customizes the separator between the money output and the measurement output. Used with the `measurement` prop. Defaults to `'/'`. */\n  measurementSeparator?: ReactNode;\n}\n\n// This article helps understand the typing here https://www.benmvp.com/blog/polymorphic-react-components-typescript/ Ben is the best :)\nexport type MoneyProps<ComponentGeneric extends React.ElementType> =\n  MoneyPropsBase<ComponentGeneric> &\n    Omit<\n      React.ComponentPropsWithoutRef<ComponentGeneric>,\n      keyof MoneyPropsBase<ComponentGeneric>\n    >;\n\n/**\n * The `Money` component renders a string of the Storefront API's\n * [MoneyV2 object](https://shopify.dev/api/storefront/reference/common-objects/moneyv2) according to the\n * `locale` in the `ShopifyProvider` component.\n */\nexport function Money<ComponentGeneric extends React.ElementType = 'div'>({\n  data,\n  as,\n  withoutCurrency,\n  withoutTrailingZeros,\n  measurement,\n  measurementSeparator = '/',\n  ...passthroughProps\n}: MoneyProps<ComponentGeneric>): JSX.Element {\n  if (!isMoney(data)) {\n    throw new Error(\n      `<Money/> needs a valid 'data' prop that has 'amount' and 'currencyCode'`,\n    );\n  }\n  const moneyObject = useMoney(data);\n  const Wrapper = as ?? 'div';\n\n  let output = moneyObject.localizedString;\n\n  if (withoutCurrency || withoutTrailingZeros) {\n    if (withoutCurrency && !withoutTrailingZeros) {\n      output = moneyObject.amount;\n    } else if (!withoutCurrency && withoutTrailingZeros) {\n      output = moneyObject.withoutTrailingZeros;\n    } else {\n      // both\n      output = moneyObject.withoutTrailingZerosAndCurrency;\n    }\n  }\n\n  return (\n    <Wrapper {...passthroughProps}>\n      {output}\n      {measurement && measurement.referenceUnit && (\n        <>\n          {measurementSeparator}\n          {measurement.referenceUnit}\n        </>\n      )}\n    </Wrapper>\n  );\n}\n\n// required in order to narrow the money object down and make TS happy\nfunction isMoney(\n  maybeMoney: PartialDeep<MoneyV2, {recurseIntoArrays: true}>,\n): maybeMoney is MoneyV2 {\n  return (\n    typeof maybeMoney.amount === 'string' &&\n    !!maybeMoney.amount &&\n    typeof maybeMoney.currencyCode === 'string' &&\n    !!maybeMoney.currencyCode\n  );\n}\n"],"mappings":";;AAiCO,SAASA,MAAAC,IAAA,EAQ8B;EAAA,IAR4B;IACxEC,IAAA;IACAC,EAAA;IACAC,eAAA;IACAC,oBAAA;IACAC,WAAA;IACAC,oBAAA,GAAuB;IACvB,GAAGC;EACL,IAAAP,IAAA;EACM,KAACQ,OAAA,CAAQP,IAAI,GAAG;IAClB,MAAM,IAAIQ,KAAA,CACR;EAEJ;EACM,MAAAC,WAAA,GAAcC,QAAA,CAASV,IAAI;EACjC,MAAMW,OAAA,GAAUV,EAAA,IAAM;EAEtB,IAAIW,MAAA,GAASH,WAAA,CAAYI,eAAA;EAEzB,IAAIX,eAAA,IAAmBC,oBAAA,EAAsB;IACvC,IAAAD,eAAA,IAAmB,CAACC,oBAAA,EAAsB;MAC5CS,MAAA,GAASH,WAAA,CAAYK,MAAA;IAAA,WACZ,CAACZ,eAAA,IAAmBC,oBAAA,EAAsB;MACnDS,MAAA,GAASH,WAAA,CAAYN,oBAAA;IAAA,OAChB;MAELS,MAAA,GAASH,WAAA,CAAYM,+BAAA;IACvB;EACF;EAGE,sBAAAC,IAAA,CAACL,OAAA,EAAS;IAAA,GAAGL,gBAAA;IACVW,QAAA,GAAAL,MAAA,EACAR,WAAA,IAAeA,WAAA,CAAYc,aAAA,IAEvB,eAAAF,IAAA,CAAAG,QAAA;MAAAF,QAAA,GAAAZ,oBAAA,EACAD,WAAA,CAAYc,aAAA;IAAA,CACf;EAEJ;AAEJ;AAGA,SAASX,QACPa,UAAA,EACuB;EACvB,OACE,OAAOA,UAAA,CAAWN,MAAA,KAAW,YAC7B,CAAC,CAACM,UAAA,CAAWN,MAAA,IACb,OAAOM,UAAA,CAAWC,YAAA,KAAiB,YACnC,CAAC,CAACD,UAAA,CAAWC,YAAA;AAEjB"},"metadata":{},"sourceType":"module","externalDependencies":[]}