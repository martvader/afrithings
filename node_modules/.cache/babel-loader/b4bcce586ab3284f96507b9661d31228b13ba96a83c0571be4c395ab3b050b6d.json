{"ast":null,"code":"import { jsx } from \"react/jsx-runtime\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useCart } from \"./CartProvider.mjs\";\nimport { BaseButton } from \"./BaseButton.mjs\";\nfunction BuyNowButton(props) {\n  const {\n    cartCreate,\n    checkoutUrl\n  } = useCart();\n  const [loading, setLoading] = useState(false);\n  const {\n    quantity,\n    variantId,\n    onClick,\n    attributes,\n    children,\n    ...passthroughProps\n  } = props;\n  useEffect(() => {\n    if (checkoutUrl) {\n      window.location.href = checkoutUrl;\n    }\n  }, [checkoutUrl]);\n  const handleBuyNow = useCallback(() => {\n    setLoading(true);\n    cartCreate({\n      lines: [{\n        quantity: quantity ?? 1,\n        merchandiseId: variantId,\n        attributes\n      }]\n    });\n  }, [cartCreate, quantity, variantId, attributes]);\n  return /* @__PURE__ */jsx(BaseButton, {\n    disabled: loading ?? passthroughProps.disabled,\n    ...passthroughProps,\n    onClick,\n    defaultOnClick: handleBuyNow,\n    children\n  });\n}\nexport { BuyNowButton };","map":{"version":3,"names":["BuyNowButton","props","cartCreate","checkoutUrl","useCart","loading","setLoading","useState","quantity","variantId","onClick","attributes","children","passthroughProps","useEffect","window","location","href","handleBuyNow","useCallback","lines","merchandiseId","jsx","BaseButton","disabled","defaultOnClick"],"sources":["/home/martin/node_modules/.pnpm/@shopify+hydrogen-react@2023.4.0_react-dom@18.2.0_react@18.2.0_typescript@5.0.4/node_modules/@shopify/hydrogen-react/src/BuyNowButton.tsx"],"sourcesContent":["import {useEffect, useState, useCallback} from 'react';\nimport {useCart} from './CartProvider.js';\nimport {\n  BaseButton,\n  type BaseButtonProps,\n  type CustomBaseButtonProps,\n} from './BaseButton.js';\n\ninterface BuyNowButtonPropsBase {\n  /** The item quantity. Defaults to 1. */\n  quantity?: number;\n  /** The ID of the variant. */\n  variantId: string;\n  /** An array of cart line attributes that belong to the item being added to the cart. */\n  attributes?: {\n    key: string;\n    value: string;\n  }[];\n}\n\ntype BuyNowButtonProps<AsType extends React.ElementType = 'button'> =\n  BuyNowButtonPropsBase & BaseButtonProps<AsType>;\n\n/**\n * The `BuyNowButton` component renders a button that adds an item to the cart and redirects the customer to checkout.\n * Must be a child of a `CartProvider` component.\n */\nexport function BuyNowButton<AsType extends React.ElementType = 'button'>(\n  props: BuyNowButtonProps<AsType>,\n): JSX.Element {\n  const {cartCreate, checkoutUrl} = useCart();\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const {\n    quantity,\n    variantId,\n    onClick,\n    attributes,\n    children,\n    ...passthroughProps\n  } = props;\n\n  useEffect(() => {\n    if (checkoutUrl) {\n      window.location.href = checkoutUrl;\n    }\n  }, [checkoutUrl]);\n\n  const handleBuyNow = useCallback(() => {\n    setLoading(true);\n    cartCreate({\n      lines: [\n        {\n          quantity: quantity ?? 1,\n          merchandiseId: variantId,\n          attributes,\n        },\n      ],\n    });\n  }, [cartCreate, quantity, variantId, attributes]);\n\n  return (\n    <BaseButton\n      disabled={loading ?? passthroughProps.disabled}\n      {...passthroughProps}\n      onClick={onClick}\n      defaultOnClick={handleBuyNow}\n    >\n      {children}\n    </BaseButton>\n  );\n}\n\n// This is only for documenation purposes, and it is not used in the code.\nexport interface BuyNowButtonPropsForDocs<\n  AsType extends React.ElementType = 'button',\n> extends BuyNowButtonPropsBase,\n    CustomBaseButtonProps<AsType> {}\n"],"mappings":";;;;AA2BO,SAASA,aACdC,KAAA,EACa;EACb,MAAM;IAACC,UAAA;IAAYC;EAAW,IAAIC,OAAA,CAAQ;EAC1C,MAAM,CAACC,OAAA,EAASC,UAAU,IAAIC,QAAA,CAAkB,KAAK;EAE/C;IACJC,QAAA;IACAC,SAAA;IACAC,OAAA;IACAC,UAAA;IACAC,QAAA;IACA,GAAGC;EACD,IAAAZ,KAAA;EAEJa,SAAA,CAAU,MAAM;IACd,IAAIX,WAAA,EAAa;MACfY,MAAA,CAAOC,QAAA,CAASC,IAAA,GAAOd,WAAA;IACzB;EAAA,GACC,CAACA,WAAW,CAAC;EAEV,MAAAe,YAAA,GAAeC,WAAA,CAAY,MAAM;IACrCb,UAAA,CAAW,IAAI;IACJJ,UAAA;MACTkB,KAAA,EAAO,CACL;QACEZ,QAAA,EAAUA,QAAA,IAAY;QACtBa,aAAA,EAAeZ,SAAA;QACfE;MACF;IACF,CACD;EAAA,GACA,CAACT,UAAA,EAAYM,QAAA,EAAUC,SAAA,EAAWE,UAAU,CAAC;EAG9C,sBAAAW,GAAA,CAACC,UAAA;IACCC,QAAA,EAAUnB,OAAA,IAAWQ,gBAAA,CAAiBW,QAAA;IACrC,GAAGX,gBAAA;IACJH,OAAA;IACAe,cAAA,EAAgBP,YAAA;IAEfN;EAAA;AAGP"},"metadata":{},"sourceType":"module","externalDependencies":[]}