{"ast":null,"code":"import { useEffect } from \"react\";\nimport { stringify } from \"worktop/cookie\";\nimport { SHOPIFY_Y, SHOPIFY_S } from \"./cart-constants.mjs\";\nimport { getShopifyCookies, buildUUID } from \"./cookies-utils.mjs\";\nconst longTermLength = 60 * 60 * 24 * 360 * 1;\nconst shortTermLength = 60 * 30;\nfunction useShopifyCookies(options) {\n  const {\n    hasUserConsent = false,\n    domain = \"\"\n  } = options || {};\n  useEffect(() => {\n    const cookies = getShopifyCookies(document.cookie);\n    if (hasUserConsent) {\n      setCookie(SHOPIFY_Y, cookies[SHOPIFY_Y] || buildUUID(), longTermLength, domain);\n      setCookie(SHOPIFY_S, cookies[SHOPIFY_S] || buildUUID(), shortTermLength, domain);\n    } else {\n      setCookie(SHOPIFY_Y, \"\", 0, domain);\n      setCookie(SHOPIFY_S, \"\", 0, domain);\n    }\n  });\n}\nfunction setCookie(name, value, maxage, domain) {\n  document.cookie = stringify(name, value, {\n    maxage,\n    domain,\n    samesite: \"Lax\",\n    path: \"/\"\n  });\n}\nexport { useShopifyCookies };","map":{"version":3,"names":["longTermLength","shortTermLength","useShopifyCookies","options","hasUserConsent","domain","useEffect","cookies","getShopifyCookies","document","cookie","setCookie","SHOPIFY_Y","buildUUID","SHOPIFY_S","name","value","maxage","stringify","samesite","path"],"sources":["/home/martin/node_modules/.pnpm/@shopify+hydrogen-react@2023.4.0_react-dom@18.2.0_react@18.2.0_typescript@5.0.4/node_modules/@shopify/hydrogen-react/src/useShopifyCookies.tsx"],"sourcesContent":["import {useEffect} from 'react';\nimport {stringify} from 'worktop/cookie';\nimport {SHOPIFY_Y, SHOPIFY_S} from './cart-constants.js';\nimport {buildUUID, getShopifyCookies} from './cookies-utils.js';\n\nconst longTermLength = 60 * 60 * 24 * 360 * 1; // ~1 year expiry\nconst shortTermLength = 60 * 30; // 30 mins\n\ntype UseShopifyCookiesOptions = {\n  /**\n   * If set to `false`, Shopify cookies will be removed.\n   * If set to `true`, Shopify unique user token cookie will have cookie expiry of 1 year.\n   * Defaults to false.\n   **/\n  hasUserConsent?: boolean;\n  /**\n   * The domain scope of the cookie. Defaults to empty string.\n   **/\n  domain?: string;\n};\n\nexport function useShopifyCookies(options?: UseShopifyCookiesOptions): void {\n  const {hasUserConsent = false, domain = ''} = options || {};\n  useEffect(() => {\n    const cookies = getShopifyCookies(document.cookie);\n\n    /**\n     * Set user and session cookies and refresh the expiry time\n     */\n    if (hasUserConsent) {\n      setCookie(\n        SHOPIFY_Y,\n        cookies[SHOPIFY_Y] || buildUUID(),\n        longTermLength,\n        domain,\n      );\n      setCookie(\n        SHOPIFY_S,\n        cookies[SHOPIFY_S] || buildUUID(),\n        shortTermLength,\n        domain,\n      );\n    } else {\n      setCookie(SHOPIFY_Y, '', 0, domain);\n      setCookie(SHOPIFY_S, '', 0, domain);\n    }\n  });\n}\n\nfunction setCookie(\n  name: string,\n  value: string,\n  maxage: number,\n  domain: string,\n): void {\n  document.cookie = stringify(name, value, {\n    maxage,\n    domain,\n    samesite: 'Lax',\n    path: '/',\n  });\n}\n"],"mappings":";;;;AAKA,MAAMA,cAAA,GAAiB,KAAK,KAAK,KAAK,MAAM;AAC5C,MAAMC,eAAA,GAAkB,KAAK;AAetB,SAASC,kBAAkBC,OAAA,EAA0C;EAC1E,MAAM;IAACC,cAAA,GAAiB;IAAOC,MAAA,GAAS;EAAE,IAAIF,OAAA,IAAW;EACzDG,SAAA,CAAU,MAAM;IACR,MAAAC,OAAA,GAAUC,iBAAA,CAAkBC,QAAA,CAASC,MAAM;IAKjD,IAAIN,cAAA,EAAgB;MAClBO,SAAA,CACEC,SAAA,EACAL,OAAA,CAAQK,SAAS,KAAKC,SAAA,CAAU,GAChCb,cAAA,EACAK,MAAA;MAEFM,SAAA,CACEG,SAAA,EACAP,OAAA,CAAQO,SAAS,KAAKD,SAAA,CAAU,GAChCZ,eAAA,EACAI,MAAA;IACF,OACK;MACKM,SAAA,CAAAC,SAAA,EAAW,IAAI,GAAGP,MAAM;MACxBM,SAAA,CAAAG,SAAA,EAAW,IAAI,GAAGT,MAAM;IACpC;EAAA,CACD;AACH;AAEA,SAASM,UACPI,IAAA,EACAC,KAAA,EACAC,MAAA,EACAZ,MAAA,EACM;EACGI,QAAA,CAAAC,MAAA,GAASQ,SAAA,CAAUH,IAAA,EAAMC,KAAA,EAAO;IACvCC,MAAA;IACAZ,MAAA;IACAc,QAAA,EAAU;IACVC,IAAA,EAAM;EAAA,CACP;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}